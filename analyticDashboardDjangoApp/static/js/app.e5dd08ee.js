(function(){"use strict";var t={5270:function(t,e,s){var a=s(3751),o=s(641),r=s(33),n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABICAYAAABcBhM9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAyGSURBVHgB7ZsJtJVVFcfPG8IHOLxI0VIRnAnQJ5LJIEoIJiwW6gJSEC21mCQyVqImumTVssRVaoWsZAiFbBWpGA6sEpISVEBiEEQGmWJGHsPjAW/4+v3ftz84XO97+u69wIW+vdZ/nfncc/a3zz777HOuczHFFFNMMcUUU0wxxRRTTP/3lOOOIQVBoN8/xRvHPnAgJycn8OrkWp0mYBPYC3b7dY4mHROGGRM6V1ZWXp+bm9uF9GlVg8nJWU3wLngKbAN3gB6Uf111KD9AegfhdMKHCTe7E52Y+BUwaio4UFFRERBWVhhZXHmbwNtWFBwqOqzOevoaCgrciUpMrg2T3RkxgfSHYBBoBpqDB8QsK4/qvA46gBaGe6mzJqoDjbSlfeIQEypkcv0iZkArQR/wJS010A3cqomDuz2GParlK5hULib+CDgbzLM6JcR/rmXrTgRiIhcw0eURE4h/TF4TKxODntUqI5xkzGkRLUWfCcQHkr+D/HJJWVlZ2beJ7/WYu1tMd8c7MYlh0YTAn0g3jpYQYVtNGkYsI36u5bXxltsFCX21Nx22XUxTOfGHyJplH2PFcavTGPhJoJ8mZ5N/xHZHv84I01O3e3lta2BYPnjfmKPyPpZ/OYj02hjiTRN/K6uJwXaXvhEzbOIlpaWl5xN+w5cA4u1Af39yNTHMyhtR1t/aqc+zQD1+7yV/eYIR5J/qsplMJ93nmQxbSE/R7ldeXt6bdDn59ye0KSBvqCctn2EY4Q2knxZjEtpeBXaAB9FpnaT8+Y1FtmyF32a1pDG4az1mvUu6ZTRgSRf5ZUATrOO16aP5gQW2a36GYcQnWfrBhN+73/If8vLqgF950j3YZSMxsDwwxwapnbCh5Rfa0httjJxpukjSeCrpf1ubX1v9ZBJ2n7UtJn6Jt2ncY/Vm2Q57qZasmKYNxsr+m5VSJgYxoVIzETpF+aRf9kyKvVpeQWh7vRbZZYQbIn1TDcNOBwusrsyH6eA8Y/xE8JiYSNkM8Kl2XNCE+pttPL1ctpGWo01yTcKS668lZbvkNy1vqMfERaS7efWTMayepMeM18hGG2FlOV7be6z8jxoD8bnW1zCXbcQAB9lEVvsMS0ba+q3uaOmthH5qMiu07IYbo/+WZAz55C+hfJRJ3ORMMyyTa3su3oMq+4u4Jj3YU/jSKz8GX6760dzck6lbQfR3QAaVzpM9k3VqTLoTDLCsV4DaFli5dOQALWn6LAet6f8nFGkcRfZ7B1y2EQM+xXSYGLDOt7oJf2ESc5eldcwpDUKrvxPxMjDbmHOYhIH6xFdauqt0F3U3Eo60vnpZWY+E8XSrCKmM+GUuQ5RJCdvDwJ63pXAOX3oM2Gdl8m1pEjeb1I2nrCmhvnw/LSXS00BlYqfklSAh0fL7kcZMXmfCJ4zBfa3sQk+iW4FnrO4cwsUuQ5TvMkhaajCrKh6Elrj0k3ay/pbXlQlIMsaCIbbUqnSY7WZ5LvSsHkba+ax9B4Jl9PEG4WPgAdDF6gzn94uQKO248nx81Zpr95Wk73XZRAxwMIPeL+tey8us+sAzBaYRbrO8CstfbGbGK7bcFkQGZ8Iu2cFMCXlfXzVDN9ottxJOlGkCttvZVYfz+aR3+TZeVpE8pDbRFxhgXcIBxpT5pIuC0LDVofgp8uQU/Kl0mNra0upt9fcl2yW95SYToxd4Eei4JKeijOAzgtD+OsNQV3rO+nkvyCYno014pw1uuKXrkZaeuTyhbk6QxPI25a+NYkJFDYdv/zfd54+ri/W1K0gwX44pmaKfZ5N8tJo6Wk5S8KcEh4429cF1JjViZH5QjR1mH+Fs21nzvLz86qRHu7JJ7VbVc9lEDGisDW5uYM5AryxH1reVLyE9GYwz37w4M9arWx3DWksXkr9H51HCCYTvm/Px3iTjkZnznvUzzmUb6cszuJKKQ57PIpOgfCuX3+ovVqfK/WJnSx2NrvH6qY5hp4K3JC2UlXubhxR8b6tzMjgdV8810ls2lp0ai8tGCkJXTZlNRpKgW6F3gkOei1xT/HcGoXV+hSaZ0EdNRyNtHDqIdwQPw5hv2RJVv3n83pvG0BJvd/5eVin8RDJd9U8beGD+rzNr0b7tF1H6SdqJmS/qkgUstN26KKuZFZF98Zs9syKvFm1TYpj3u/kWHhFGHZGdQ0ccBrzUwqYwrSfhqxQ1cuGBeB1l77hakpkS9cFZQBtL9L5C4TKwWQdwd7yRfWG5myeZlOlQvsAsfTFxYg1tq1P6XwN/0EGcfvZE1r4HWfo6Mei8ek5whLysGZOwIPRMXAjWgXZgJRjIF29A2fXEW0jiwCLi413tSf2czXlRin0LYSF5uhEvJn5lEJ4d2wbhEWsfeY8TjiLvEo2F393mson48o/bl54ahEeWKieiGaTaydqDJp/35YPkHleZJ7oV+g39LzXFvtck9xOZG6CB6S/9xk2y0+RI9GzDjEhcRiQsCC19ne9yzRVzqT1NcvaOa7Uhlb5lW00hqidPU+l/OPEPEsa+h9/51OKfCCZxheY9kZTVBSUuTcrUkpSd1ci8qGVgtjLNxpK7RoNvyeA1aLmBJJEr8/LylpJcC7bXoKzlK9PSakB4DqH8X3fT98UqJG9/EN5Sqb2W+0jy5MqZAXoRlwNRHt6upP/s0qRMMazI+loBU5rDkF9avnTXHQy4HgNeSb5eEMqz0RhmXU20MSigXBIxifiYJH3Lwh9Ge/X/d/A62ED6pKiCXONht5WN+A3toKs0FrAfzAWtQRuXRQyruvVh4DPAGUS3mR2kAc8gfj75LYnr3jDICWeoSc0Ci026WrjkLyKLKR+CRDaHydJp3wHaMeXNjTy6DcBOmLUDpkmXPUkbeSh2EkqntjYjNjeZV7c2lDbDzCi9zoW20DRwiZamBsckC5nkbiYiG2kn+I/ntm5AeR3KW7nQKzrLHbKrfJIkPU27FdR/g/r/cOEyPdNb4lr6H4K9xDWe6NJDOmurCy9amtrHTOuZZyYkTLuf/POSEr190MRdeXl55/z8/NuI6r2XbnRO8xvRZht5xZRNZ5Ji9AfaIKDE/neB26hzEXX7Un6jC5epdr3ITaRGkpz99CGP7ziyfkb6X+B25dnx7BbwrEuD0mYYg5OnQaJ+gEH1JexpkxkYhFdukq45xEsTmjakrp4p6ZFKf+KvEe+e5Cd0RTeZsDl1VoEp1F8OAxeSV2x1dMnb0Gwz2XtSEb/XI2OkUoz6KxhEHX3c0em8wE6LYWbR36QPLMOVAZ/uwifhWgK3RsuP/MokbSUdUmfaYb8L2rvkOuxKUId6P3ThneQGlmVgfURn1NnkVURjsg0hWvrSbSUyL8i/lrQkvdilSOlKWDNwkSK2U33kwlsi6ZZLXajI9Y7isJsgDR7kmJRo59NN0pOm+xJ/42Xy33Th0hRz+yI1rex3LlM/MEsfSL9dStlC0jIr5ttHUb6eUmnlVkk18bddipQuw5oGnj+LuK68PgZyQ+uWu0aPgRmVpUxC+us5My0OI7OzdGgfRX3pr0Lv96o+lPXTzupXcSZBGUZWvnxmHd0xZNhBnWPjO82gM6NutrVLFUdWuDwYSJWOMyeRJ8tdm4SenOsMKKnpTPkU/wek5MF4KW1b6lups4pwI+mNUT36/Arp83TedOGuK6+GPthhRyLqtHVpUEo+oyC8RruFgetFzsUMYj1YyKDXazIuPHivd6Gu0Bbf2IXWvuyoutRbSztZ+AHLp4D0DbSXLpTi1hOlKocj8WfI+77ZbrrAfcGFBqlc3A1pe9BEIK2l+ZElpdu0fNXPhVq2xigxfz/9PuFCFVDro1KqDLvLPAGKv8SAnseE0JdsRPw8Qn3txoT62joqrU/yWxJJKedzzZOw1Q7Y9Q8OLjQzNNklJLfYBrEFlFh+pPyjJjJgC/UByZNkL3eh7ltov9+K8Q1RPZj2HOU/cLWkVJek/rWhZTWP+EaY1ZUvPJ/4Pr7yW4Q7XChZm2ygu6rpR2U6ARQxERmWM4nfGBUaU9ZIel141T8ByHDdZptM2MmhuD6AvCQFxlx9xGYmjXqQEthbC922n+VSoJQYFh18IT066WEi390UrkuB1pmvbHnY/UH3sjrTS50L7BCtl40jXC1Jh31vEyiINotUKCWGRRZ5kHC5kSKzRFrCegzXLvGn6PNqynRVdvDKLgN01A1XvZSZ6dIneWmvcqEHdjUM6Ui/mowOyvq730wzOGWHSdfJbFnj0iQ9UqGvte54pCDJ7U4QemlzvkjdmGKKKaaYYooppphiiimmmI46/Q/mkqgOUpboVQAAAABJRU5ErkJggg==";const i={class:"app-container"},c={class:"dashboard-header"},l={class:"logo-greeting"},u={class:"greeting"},d={key:0},h={key:1},m={class:"main-content"};function p(t,e,s,a,p,v){const g=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("header",c,[(0,o.Lk)("div",l,[e[0]||(e[0]=(0,o.Lk)("div",{class:"logo"},[(0,o.Lk)("img",{src:n,alt:"LMS Logo"})],-1)),(0,o.Lk)("div",u,[(0,o.Lk)("h1",null,"Welcome, "+(0,r.v_)(p.userName),1),v.showHeader?((0,o.uX)(),(0,o.CE)("p",d,"Glad to see you again, ready for another session?")):((0,o.uX)(),(0,o.CE)("p",h,"Great to have you back, ready to inspire and guide the next generation?"))])])]),(0,o.Lk)("main",m,[(0,o.bF)(g)])])}s(4114),s(8992),s(7550);var v=s(5537);const g={STUDENT:"http://purl.imsglobal.org/vocab/lis/v2/membership#Learner",TEACHER:"http://purl.imsglobal.org/vocab/lis/v2/membership#Instructor",ADMIN:"http://purl.imsglobal.org/vocab/lis/v2/system/person#Administrator"};var k={name:"App",data(){return{userName:"User",roles:[]}},computed:{showHeader(){return!["/educator-dashboard","/lti/launch"].includes(this.$route.path)},isStudent(){return this.roles.some((t=>t===g.STUDENT))},isTeacher(){return this.roles.some((t=>t===g.TEACHER))},isAdmin(){return this.roles.some((t=>t===g.ADMIN))}},methods:{navigateTo(t){this.$router.push(t)},getCookie(t){const e=`; ${document.cookie}`,s=e.split(`; ${t}=`);return 2===s.length?s.pop().split(";").shift():null},fetchUserData(){const t=this.getCookie("auth_token");if(t)try{const e=(0,v.s)(t);console.log("Raw Token Data:",e);const s=e.roles||[];this.roles=JSON.parse(JSON.stringify(s)),console.log("Processed Roles:",this.roles),console.log("Is Student:",this.isStudent),this.userName=e.name||"Unknown User",this.autoRedirect()}catch(e){console.error("Token Error:",e),this.$router.push("/login")}else this.$router.push("/login")},autoRedirect(){const t=this.$route.path;console.log("Current Path:",t),this.isAdmin&&!t.includes("admin")?(console.log("Redirecting to admin dashboard"),this.$router.replace("/admin-dashboard")):this.isTeacher&&!t.includes("educator")?(console.log("Redirecting to educator dashboard"),this.$router.replace("/educator-dashboard")):this.isStudent&&!t.includes("student")?(console.log("Redirecting to student dashboard"),this.$router.replace("/overall")):console.warn("No matching role, staying on current page.")}},created(){this.fetchUserData()}},f=s(6262);const y=(0,f.A)(k,[["render",p]]);var A=y,b=s(5220);const C={class:"overall-container"},w={class:"nav-container"},L={key:0,class:"nav-buttons"},E={class:"dashboard"},T={class:"grid-container"},S={class:"grid-item time-spent-daily"},R={class:"grid-item learning-effectiveness"},D={class:"grid-item daily-streak"},x={class:"grid-item recommendation-box"},F={class:"grid-item course-completion-chart"};function _(t,e,s,a,r,n){const i=(0,o.g2)("TimeSpentDaily"),c=(0,o.g2)("LearningEffectivenessChart"),l=(0,o.g2)("DailyStreak"),u=(0,o.g2)("RecommendationBox"),d=(0,o.g2)("CourseCompletionChart");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",w,[r.showHeader?((0,o.uX)(),(0,o.CE)("nav",L,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=t=>n.navigateTo("/overall"))},"Overall"),(0,o.Lk)("button",{onClick:e[1]||(e[1]=t=>n.navigateTo("/performance"))},"Performance"),(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>n.navigateTo("/engagement"))},"Engagement")])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",E,[(0,o.Lk)("div",T,[(0,o.Lk)("div",S,[(0,o.bF)(i)]),(0,o.Lk)("div",R,[(0,o.bF)(c)]),(0,o.Lk)("div",D,[(0,o.bF)(l)]),(0,o.Lk)("div",x,[(0,o.bF)(u)]),(0,o.Lk)("div",F,[(0,o.bF)(d)])])])])}const X={class:"time-spent-daily-container"},U={key:0,class:"time-spent-table"};function I(t,e,s,n,i,c){const l=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",X,[e[2]||(e[2]=(0,o.Lk)("h3",null,"Time Spent on Activities (Daily)",-1)),e[3]||(e[3]=(0,o.Lk)("p",null,"in Minutes",-1)),(0,o.bF)(l,{type:"bar",options:c.chartOptions,series:c.chartData,height:"350"},null,8,["options","series"]),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(0,a.D$)(((...t)=>c.toggleTable&&c.toggleTable(...t)),["prevent"])),class:"view-more-button"},(0,r.v_)(i.showTable?"View Less":"View More"),1),i.showTable?((0,o.uX)(),(0,o.CE)("table",U,[e[1]||(e[1]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Day"),(0,o.Lk)("th",null,"Time Spent (minutes)")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.data,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.day},[(0,o.Lk)("td",null,(0,r.v_)(t.day),1),(0,o.Lk)("td",null,(0,r.v_)(t.minutes),1)])))),128))])])):(0,o.Q3)("",!0)])}s(1454),s(8872);var P=s(1079),O={name:"TimeSpentDaily",components:{apexchart:P.A},data(){return{data:[],showTable:!1}},computed:{chartData(){return[{name:"Time Spent",data:this.data.map((t=>t.minutes))}]},chartOptions(){return{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:this.data.map((t=>t.day))},yaxis:{title:{text:"Minutes"}},fill:{opacity:1},tooltip:{y:{formatter:function(t){return`${t} minutes`}}},annotations:{yaxis:[{y:this.averageTimeSpent,borderColor:"#9013fe",label:{borderColor:"#9013fe",style:{color:"#fff",background:"#9013fe"},text:this.averageTimeSpent.toFixed(2)}}]}}},averageTimeSpent(){if(!this.data.length)return 0;const t=this.data.reduce(((t,e)=>t+e.minutes),0);return t/this.data.length}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchTimeSpentData(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/timeSpentOnLastSevenDays/learner",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("Failed to fetch data");const s=await e.json();this.data=s.timeSpentDaily||[]}catch(e){console.error("Error fetching data:",e)}else console.error("No authentication token found")},toggleTable(){this.showTable=!this.showTable}},mounted(){this.fetchTimeSpentData()}};const N=(0,f.A)(O,[["render",I],["__scopeId","data-v-3d659d4c"]]);var j=N;const z={class:"course-completion-container"},M={class:"course-list"},K=["onClick"],H={class:"progress-bar"},B={class:"toggle-button"},W={key:0,class:"subcourse-list"},J=["onClick"],$={class:"progress-bar"},Y={class:"toggle-button"},V={key:0,class:"assessment-list"};function Z(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",z,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Course Completion",-1)),(0,o.Lk)("ul",M,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.localCourses,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("div",{onClick:e=>i.toggleCourse(t.id),class:"course-header"},[(0,o.Lk)("span",null,(0,r.v_)(t.name),1),(0,o.Lk)("div",H,[(0,o.Lk)("div",{class:"progress",style:(0,r.Tr)({width:t.progress+"%"})},null,4)]),(0,o.Lk)("span",null,(0,r.v_)(i.formatPercentage(t.progress))+"%",1),(0,o.Lk)("span",null,(0,r.v_)(t.completedAssessments)+"/"+(0,r.v_)(t.totalAssessments),1),(0,o.Lk)("button",B,(0,r.v_)(t.open?"▼":"▶"),1)],8,K),t.open?((0,o.uX)(),(0,o.CE)("ul",W,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.subcourses,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("div",{onClick:s=>i.toggleSubcourse(t.id,e.id),class:"subcourse-header"},[(0,o.Lk)("span",null,(0,r.v_)(e.name),1),(0,o.Lk)("div",$,[(0,o.Lk)("div",{class:"progress",style:(0,r.Tr)({width:e.progress+"%"})},null,4)]),(0,o.Lk)("span",null,(0,r.v_)(i.formatPercentage(e.progress))+"%",1),(0,o.Lk)("span",null,(0,r.v_)(e.completedAssessments)+"/"+(0,r.v_)(e.totalAssessments),1),(0,o.Lk)("button",Y,(0,r.v_)(e.open?"▼":"▶"),1)],8,J),e.open?((0,o.uX)(),(0,o.CE)("ul",V,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.assessments,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("span",null,(0,r.v_)(t.name),1),(0,o.Lk)("span",{class:(0,r.C4)({passed:"passed"===t.status,"not-passed":"not passed"===t.status})},(0,r.v_)(t.status),3)])))),128))])):(0,o.Q3)("",!0)])))),128))])):(0,o.Q3)("",!0),e[0]||(e[0]=(0,o.Lk)("hr",{class:"divider"},null,-1))])))),128))])])}s(2577);var Q={name:"CourseCompletionChart",data(){return{localCourses:[]}},methods:{transformName(t){if(!t)return"";const e=t.split("/"),s=e[e.length-1];return s.replace(/_/g," ")},formatPercentage(t){return t%1===0?t.toFixed(0):t.toFixed(1)},async fetchData(){try{const t=document.cookie.match(/(^| )auth_token=([^;]+)/),e=t?t[2]:null;if(!e)return void console.error("Authentication token not found.");const s=await fetch("http://localhost:8000/parentsOfParents",{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error(`HTTP error from parentsOfParents! Status: ${s.status}`);const a=await s.json(),o=Object.values(a.parentOfParents),r=o.length?o[0]:"",n=this.transformName(r),i=await fetch("http://localhost:8000/assessmentPerformance/learner",{headers:{Authorization:`Bearer ${e}`}});if(!i.ok)throw new Error(`HTTP error from assessmentPerformance! Status: ${i.status}`);const c=await i.json();if(!c||!c.subcourses)return void console.error("No subcourses found in fetched data",c);const l=c.subcourses.map(((t,e)=>({id:e,name:this.transformName(t.name),progress:t.progress,completedAssessments:t.completedAssessments,totalAssessments:t.totalAssessments,open:!1,assessments:t.assessments.map(((t,e)=>({id:e,name:this.transformName(t.activityId),status:t.status})))}))),u=l.reduce(((t,e)=>t+e.totalAssessments),0),d=l.reduce(((t,e)=>t+e.completedAssessments),0),h=u>0?d/u*100:0,m={id:"course1",name:n,progress:h,completedAssessments:d,totalAssessments:u,open:!1,subcourses:l};this.localCourses=[m]}catch(t){console.error("Error fetching courses:",t)}},toggleCourse(t){const e=this.localCourses.find((e=>e.id===t));e&&(e.open=!e.open)},toggleSubcourse(t,e){const s=this.localCourses.find((e=>e.id===t));if(s){const t=s.subcourses.find((t=>t.id===e));t&&(t.open=!t.open)}}},created(){this.fetchData()}};const G=(0,f.A)(Q,[["render",Z],["__scopeId","data-v-6bc265d4"]]);var q=G;const tt={class:"streak-container"},et={key:0},st={key:1},at={key:2},ot={class:"streak"},rt={class:"streak-visual"},nt={class:"day-label"};function it(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",tt,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Daily Streak",-1)),(0,o.Lk)("p",null,[0===n.streak?((0,o.uX)(),(0,o.CE)("span",et," You don't have a streak. Your last streak was "+(0,r.v_)(n.daysSinceLastStreak)+" days ago. ",1)):1===n.streak?((0,o.uX)(),(0,o.CE)("span",st," You were last active on one day, but your streak hasn't continued yet! ")):((0,o.uX)(),(0,o.CE)("span",at,[e[0]||(e[0]=(0,o.eW)(" You have been active for ")),(0,o.Lk)("span",ot,(0,r.v_)(n.streak),1),(0,o.eW)(" "+(0,r.v_)(1===n.streak?"day":"days")+" in a row! ",1)]))]),(0,o.Lk)("div",rt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.daysOfWeek,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:(0,r.C4)(["streak-day",{active:n.activeDays.includes(t)}])},[(0,o.Lk)("span",nt,(0,r.v_)(t),1)],2)))),128))])])}s(3949);var ct={name:"DailyStreak",data(){return{streak:0,lastActiveDate:null,daysSinceLastStreak:0,activeDays:[],daysOfWeek:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},calculateDaysSinceLastStreak(t){const e=new Date,s=new Date(t),a=e-s;return Math.floor(a/864e5)},async fetchDailyStreak(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/dailyStreak",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();console.log("Daily Streak Data:",s);const a=(new Date).toISOString().split("T")[0];s.lastDate===a?(this.streak=s.lastStreak,this.daysSinceLastStreak=0):(this.streak=0,this.daysSinceLastStreak=this.calculateDaysSinceLastStreak(s.lastDate)),this.lastActiveDate=s.lastDate,this.fetchActiveDays()}catch(e){console.error("Error fetching daily streak data:",e)}else console.error("No authentication token found.")},async fetchActiveDays(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/activeHoursThisWeek",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();console.log("Active Hours Data:",s);const a=[];s.activeHours.forEach(((t,e)=>{t.hours.some((t=>t.timeSpent>0))&&a.push(this.daysOfWeek[e])})),this.activeDays=a}catch(e){console.error("Error fetching active hours data:",e)}else console.error("No authentication token found.")}},mounted(){this.fetchDailyStreak()}};const lt=(0,f.A)(ct,[["render",it],["__scopeId","data-v-47998388"]]);var ut=lt;const dt={style:{width:"100%",height:"100%",display:"flex","flex-direction":"column","justify-content":"space-between"}},ht={style:{flex:"1",position:"relative"}},mt={ref:"scatterChart",style:{width:"100%",height:"100%"}};function pt(t,e,s,a,r,n){return(0,o.uX)(),(0,o.CE)("div",dt,[(0,o.Lk)("div",ht,[e[0]||(e[0]=(0,o.Lk)("h3",null,[(0,o.eW)(" Learning Effectiveness "),(0,o.Lk)("span",{class:"info-icon",title:"This chart shows the assessment points versus additional time spent beyond the planned 60 minutes."},"ℹ️")],-1)),e[1]||(e[1]=(0,o.Lk)("p",null,"Assessment points vs. Additional Time Spent on Activity",-1)),(0,o.Lk)("canvas",mt,null,512)]),e[2]||(e[2]=(0,o.Fv)('<div class="manual-legend" data-v-e3face24><div class="legend-item" data-v-e3face24><div class="legend-box" style="background-color:orange;" data-v-e3face24></div><span data-v-e3face24>Improvement Potential</span></div><div class="legend-item" data-v-e3face24><div class="legend-box" style="background-color:green;" data-v-e3face24></div><span data-v-e3face24>Best Practice</span></div></div>',1))])}s(670);var vt=s(953),gt=s(2022);gt.t1.register(...gt.$L);var kt=(0,o.pM)({name:"ScatterPlot",setup(){const t=(0,vt.KR)(null),e=(0,vt.KR)([]);let s=null;const a=t=>{const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},r=async()=>{try{const t=a("auth_token");if(!t)return void console.error("No authentication token found.");const s=await fetch("http://localhost:8000/learningEffectiveness",{headers:{Authorization:`Bearer ${t}`}});if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const o=await s.json();console.log("API Response:",o),e.value=o.activitiesEfficiency.flatMap((t=>t.scores.map((t=>({x:t.duration-60,y:t.score}))))),console.log("Mapped Scatter Data:",e.value),n()}catch(t){console.error("Error fetching data:",t)}},n=()=>{const a=t.value?.getContext("2d");if(!a)return void console.error("Failed to get canvas context.");s&&s.destroy();const o=e.value.map((t=>t.x)),r=Math.min(...o)-5,n=Math.max(...o)+5;s=new gt.t1(a,{type:"scatter",data:{datasets:[{label:"Learning Effectiveness",data:e.value,backgroundColor:"rgba(75, 192, 192, 1)",pointRadius:6,pointHoverRadius:8}]},options:{plugins:{legend:{display:!1}},scales:{x:{type:"linear",title:{display:!0,text:"Time Above Planned Time (minutes)",font:{size:12,weight:"bold"}},min:r,max:n},y:{title:{display:!0,text:"Assessment Points",font:{size:12,weight:"bold"}},min:0,max:100}}}})};return(0,o.sV)(r),{scatterChart:t}}});const ft=(0,f.A)(kt,[["render",pt],["__scopeId","data-v-e3face24"]]);var yt=ft;const At={class:"recommendation-box"};function bt(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",At,[(0,o.Lk)("p",null,(0,r.v_)(i.recommendationMessage),1)])}var Ct={name:"RecommendationBox",inject:["activities","totalTime","passRate"],computed:{recommendationMessage(){const{activityRevisits:t,assessmentPerformance:e,courseCompletionRate:s,passRate:a,attemptsOnAssessments:o}=this;return e<50&&o>3?"You're making multiple attempts on assessments, but your scores are low. Focus on understanding the concepts rather than memorizing answers.":e<50&&s<50?"You're completing fewer activities and scoring low on assessments. This might mean you're struggling with the material. Take time to review and reflect on what you've learned.":s<50&&a<50&&this.timeSpent>60?"You're spending a lot of time, completing fewer activities, and achieving low pass rates. This might mean your study methods could be more effective. Try using active learning techniques.":a<50&&this.timeSpent>60&&t>5?"You're spending a lot of time and revisiting content frequently, but your pass rate is low. This might mean you're struggling with the material despite your effort. Try breaking down the material into smaller parts.":`You're doing great! Keep up the good work and continue to challenge yourself.\n                Time Spent: ${this.timeSpent} hours\n                Activity Revisits: ${t} times\n                Assessment Performance: ${e}%\n                Course Completion Rate: ${s}%\n                Pass Rate: ${a}%\n                Attempts on Assessments: ${o} attempts%`}},methods:{async fetchData(){try{const t=document.cookie.match(/(^| )auth_token=([^;]+)/)?.[2];if(!t)return void console.error("Authentication token not found.");const[e,s,a,o,r,n]=await Promise.all([fetch("http://localhost:8000/activityRevisits",{headers:{Authorization:`Bearer ${t}`}}),fetch("http://localhost:8000/assessmentPerformance",{headers:{Authorization:`Bearer ${t}`}}),fetch("http://localhost:8000/courseCompletionRate",{headers:{Authorization:`Bearer ${t}`}}),fetch("http://localhost:8000/passRate/learner",{headers:{Authorization:`Bearer ${t}`}}),fetch("http://localhost:8000/assessmentAttempts",{headers:{Authorization:`Bearer ${t}`}})]);this.activityRevisits=(await e.json()).count,this.assessmentPerformance=(await s.json()).averageScore,this.courseCompletionRate=(await a.json()).rate,this.passRate=(await o.json()).rate,this.attemptsOnAssessments=(await r.json()).attempts,this.learningEffectiveness=(await n.json()).effectiveness}catch(t){console.error("Error fetching data:",t)}}},created(){this.fetchData()}};const wt=(0,f.A)(Ct,[["render",bt]]);var Lt=wt,Et={name:"OverallView",components:{TimeSpentDaily:j,CourseCompletionChart:q,DailyStreak:ut,LearningEffectivenessChart:yt,RecommendationBox:Lt},data(){return{showHeader:!0}},methods:{navigateTo(t){this.$router.push(t)}}};const Tt=(0,f.A)(Et,[["render",_],["__scopeId","data-v-41214313"]]);var St=Tt;const Rt={class:"performance-container"},Dt={class:"nav-container"},xt={key:0,class:"nav-buttons"},Ft={class:"dashboard"},_t={class:"grid-container"},Xt={class:"grid-item assessment-performance-chart"},Ut={class:"grid-item daily-streak"},It={class:"grid-item average-attempts"},Pt={class:"grid-item pass-rate-chart"},Ot={class:"grid-item course-completion-chart"},Nt={class:"grid-item assessment-attempts-chart"};function jt(t,e,s,a,r,n){const i=(0,o.g2)("AssessmentPerformanceChart"),c=(0,o.g2)("DailyStreak"),l=(0,o.g2)("AttemptsUntilPassedCard"),u=(0,o.g2)("PassRateChart"),d=(0,o.g2)("CourseCompletionChart"),h=(0,o.g2)("AssessmentAttempts");return(0,o.uX)(),(0,o.CE)("div",Rt,[(0,o.Lk)("div",Dt,[r.showHeader?((0,o.uX)(),(0,o.CE)("nav",xt,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=t=>n.navigateTo("/overall"))},"Overall"),(0,o.Lk)("button",{onClick:e[1]||(e[1]=t=>n.navigateTo("/performance"))},"Performance"),(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>n.navigateTo("/engagement"))},"Engagement")])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ft,[(0,o.Lk)("div",_t,[(0,o.Lk)("div",Xt,[(0,o.bF)(i)]),(0,o.Lk)("div",Ut,[(0,o.bF)(c)]),(0,o.Lk)("div",It,[(0,o.bF)(l)]),(0,o.Lk)("div",Pt,[(0,o.bF)(u)]),(0,o.Lk)("div",Ot,[(0,o.bF)(d)]),(0,o.Lk)("div",Nt,[(0,o.bF)(h)])])])])}const zt={class:"pass-rate-container"};function Mt(t,e,s,a,r,n){const i=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",zt,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Pass Rate",-1)),(0,o.bF)(i,{type:"pie",options:r.chartOptions,series:r.chartData,height:"350"},null,8,["options","series"])])}var Kt={name:"PassRate",components:{apexchart:P.A},provide(){return{passRate:()=>this.passRate}},data(){return{chartData:[0,0,0],chartOptions:{chart:{type:"pie"},labels:["Not Passed","Open","Passed"],colors:["#c40d1e","#888888","#49cb40"],legend:{position:"bottom"}}}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchPassRate(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/passRate/learner",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();console.log("API Response:",s);const a=s.passed||0,o=s.failed||0,r=s.open||0;this.chartData=[o,r,a],this.passRate=o+r>0?(a/(o+r)).toFixed(2):0}catch(e){console.error("Error fetching pass rate data:",e)}else console.error("No authentication token found.")}},mounted(){this.fetchPassRate()}};const Ht=(0,f.A)(Kt,[["render",Mt],["__scopeId","data-v-f45e78ca"]]);var Bt=Ht;const Wt={class:"last-assessment-attempts"},Jt={class:"assessment-title"};function $t(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Wt,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Assessment Attempts",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.displayedAttempts,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("h4",Jt,(0,r.v_)(t.subcourse),1),(0,o.Lk)("p",{class:(0,r.C4)({passed:"Passed"===t.achieved,failed:"Failed"===t.achieved})}," Achieved: "+(0,r.v_)(t.achieved),3),(0,o.Lk)("p",null,"Score: "+(0,r.v_)(t.score)+"%",1),(0,o.Lk)("p",null,"Last Attempt: "+(0,r.v_)(i.formatDate(t.timestamp)),1)])))),128))]),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.toggleShowMore&&i.toggleShowMore(...t)),class:"view-more-button"},(0,r.v_)(n.showMore?"Show Less":"Show More"),1)])}s(4520);var Yt={name:"LastAssessmentAttempts",data(){return{attempts:[],showMore:!1}},computed:{displayedAttempts(){return this.showMore?this.attempts:this.attempts.slice(0,3)}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchAssessmentAttempts(){const t=this.getCookie("auth_token");if(t)try{const[e,s]=await Promise.all([fetch("http://localhost:8000/assessmentAttempts",{headers:{Authorization:`Bearer ${t}`}}),fetch("http://localhost:8000/learningEffectiveness",{headers:{Authorization:`Bearer ${t}`}})]);if(!e.ok||!s.ok)throw new Error("Failed to fetch data");const a=await e.json(),o=await s.json();this.processData(a,o)}catch(e){console.error(e)}else console.error("No authentication token found.")},processData(t,e){if(!t||!e.activitiesEfficiency)return;const s=new Map;e.activitiesEfficiency.forEach((t=>{if(t.scores.length>0){const e=t.scores.sort(((t,e)=>new Date(e.timestamp)-new Date(t.timestamp)))[0];s.set(t.activityId,{score:e.score,timestamp:e.timestamp})}})),this.attempts=Object.entries(t.activitiesScored).filter((([t])=>s.has(t))).map((([t,e])=>({id:t,subcourse:t.split("/").pop().replace(/_/g," "),achieved:e?"Passed":"Failed",score:s.get(t).score,timestamp:s.get(t).timestamp}))).sort(((t,e)=>new Date(e.timestamp)-new Date(t.timestamp)))},formatDate(t){return new Date(t).toLocaleDateString()},toggleShowMore(){this.showMore=!this.showMore}},mounted(){this.fetchAssessmentAttempts()}};const Vt=(0,f.A)(Yt,[["render",$t],["__scopeId","data-v-26325826"]]);var Zt=Vt;const Qt={class:"attempts-until-passed-card"},Gt={class:"attempts-number"};function qt(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Qt,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Average Attempts Until Passed",-1)),(0,o.Lk)("p",Gt,"ø "+(0,r.v_)(n.averageAttempts),1)])}var te={name:"AttemptsUntilPassedCard",data(){return{averageAttempts:"N/A"}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchAttemptsUntilPassed(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/attemptsUntilPassed",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return void console.error("Error fetching attempts until passed:",e.statusText);const s=await e.json();console.log("Received Attempts Until Passed Data:",s);const a=s.attemptsUntilPassed||{},o=Object.keys(a).length;let r=0;Object.values(a).forEach((t=>{r+=t+1})),this.averageAttempts=o>0?(r/o).toFixed(2):"N/A"}catch(e){console.error("Error fetching attempts until passed:",e)}else console.error("No authentication token found.")}},mounted(){this.fetchAttemptsUntilPassed()}};const ee=(0,f.A)(te,[["render",qt],["__scopeId","data-v-cb552f9c"]]);var se=ee;const ae={class:"assessment-performance-chart"},oe={style:{height:"400px",width:"100%"}},re={key:1};function ne(t,e,s,a,r,n){const i=(0,o.g2)("LineChart");return(0,o.uX)(),(0,o.CE)("div",ae,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Assessment Performance Over Time",-1)),(0,o.Lk)("div",oe,[r.chartData.labels.length?((0,o.uX)(),(0,o.Wv)(i,{key:0,data:r.chartData,options:r.chartOptions},null,8,["data","options"])):((0,o.uX)(),(0,o.CE)("p",re,"No data available"))])])}var ie=s(6908);s(5975);gt.t1.register(gt.hE,gt.m_,gt.s$,gt.PP,gt.kc,gt.FN,gt.No,gt.UA);var ce={name:"AssessmentPerformanceChart",components:{LineChart:ie.N1},data(){return{chartData:{labels:[],datasets:[{label:"Assessment Scores",data:[],borderColor:"#42A5F5",backgroundColor:"rgba(66, 165, 245, 0.2)",fill:!0,tension:.4},{label:"Average",data:[],borderColor:"red",borderWidth:2,borderDash:[5,5],pointRadius:0,fill:!1}]},chartOptions:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:t=>`Score: ${t.raw}`}},legend:{display:!0,position:"bottom",labels:{color:"#000",font:{size:12}}}},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM dd, yyyy",displayFormats:{day:"MMM dd"}},title:{display:!0,text:"Date"},ticks:{autoSkip:!0,maxTicksLimit:10}},y:{title:{display:!0,text:"Assessment Score"},beginAtZero:!0,min:0,max:100}}}}},methods:{getCookie(t){const e=document.cookie.match(new RegExp(`(^| )${t}=([^;]+)`));return e?e[2]:null},async fetchAssessmentScores(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/learningEffectiveness",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("Failed to fetch assessment scores");const s=await e.json(),a=s.activitiesEfficiency.flatMap((t=>t.scores.map((t=>({date:new Date(t.timestamp),formattedDate:new Date(t.timestamp).toISOString().split("T")[0],score:t.score})))));console.log("Assessment Scores:",a),a.sort(((t,e)=>t.date-e.date));const o=a.map((t=>t.formattedDate)),r=a.map((t=>t.score)),n=r.length?r.reduce(((t,e)=>t+e),0)/r.length:0,i=Array(r.length).fill(n);this.chartData={labels:o,datasets:[{...this.chartData.datasets[0],data:r},{...this.chartData.datasets[1],data:i}]}}catch(e){console.error("Error fetching assessment scores:",e)}else console.error("No authentication token found.")}},async mounted(){await this.fetchAssessmentScores()}};const le=(0,f.A)(ce,[["render",ne],["__scopeId","data-v-006f03b5"]]);var ue=le,de={name:"PerformanceView",components:{CourseCompletionChart:q,DailyStreak:ut,PassRateChart:Bt,AssessmentAttempts:Zt,AttemptsUntilPassedCard:se,AssessmentPerformanceChart:ue},data(){return{showHeader:!0}},methods:{navigateTo(t){this.$router.push(t)}}};const he=(0,f.A)(de,[["render",jt],["__scopeId","data-v-5603df6c"]]);var me=he;const pe={class:"engagement-container"},ve={class:"nav-container"},ge={key:0,class:"nav-buttons"},ke={class:"dashboard"},fe={class:"grid-container"},ye={class:"grid-item active-hours"},Ae={class:"grid-item activity-engagement"},be={class:"grid-item daily-streak"},Ce={class:"grid-item activity-revisits"},we={class:"grid-item time-spent"},Le={class:"grid-item last-rating"};function Ee(t,e,s,a,r,n){const i=(0,o.g2)("HeatmapChart"),c=(0,o.g2)("ActivityEngagement"),l=(0,o.g2)("DailyStreak"),u=(0,o.g2)("ActivityRevisits"),d=(0,o.g2)("TimeSpent"),h=(0,o.g2)("LastRating");return(0,o.uX)(),(0,o.CE)("div",pe,[(0,o.Lk)("div",ve,[r.showHeader?((0,o.uX)(),(0,o.CE)("nav",ge,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=t=>n.navigateTo("/overall"))},"Overall"),(0,o.Lk)("button",{onClick:e[1]||(e[1]=t=>n.navigateTo("/performance"))},"Performance"),(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>n.navigateTo("/engagement"))},"Engagement")])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ke,[(0,o.Lk)("div",fe,[(0,o.Lk)("div",ye,[(0,o.bF)(i)]),(0,o.Lk)("div",Ae,[(0,o.bF)(c)]),(0,o.Lk)("div",be,[(0,o.bF)(l)]),(0,o.Lk)("div",Ce,[(0,o.bF)(u)]),(0,o.Lk)("div",we,[(0,o.bF)(d,{onButtonClick:n.handleTimeSpentClick},null,8,["onButtonClick"])]),(0,o.Lk)("div",Le,[(0,o.bF)(h)])])])])}const Te={class:"heatmap-container"};function Se(t,e,s,a,r,n){const i=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",Te,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Active Hours",-1)),(0,o.bF)(i,{type:"heatmap",options:r.chartOptions,series:r.chartData,height:"350"},null,8,["options","series"])])}var Re={name:"HeatmapChart",components:{apexchart:P.A},data(){return{chartData:[],chartOptions:{chart:{height:350,type:"heatmap"},dataLabels:{enabled:!1},plotOptions:{heatmap:{colorScale:{ranges:[{from:0,to:0,color:"#f8e8cf",name:"No Activity"},{from:1,to:59,color:"#F8C373",name:"< 1 Hour"},{from:60,to:120,color:"#FF6C00",name:"1-2 Hours"},{from:121,to:180,color:"#C40D1E",name:"2-3 Hours"},{from:181,to:240,color:"#76020C",name:"3-4 Hours"}]}}},xaxis:{categories:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],position:"top",labels:{style:{colors:"#000",fontSize:"12px"}}},yaxis:{title:{text:"Time of Day"}},tooltip:{y:{formatter:function(t){return t>0?`${t} minutes`:"No Activity"}}},legend:{show:!0,position:"bottom",horizontalAlign:"center",labels:{colors:"#000"},markers:{size:8}}}}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchActiveHours(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/activeHoursThisWeek",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return void console.error("Error fetching data:",e.statusText);const s=await e.json();console.log("Received Data:",s);let a={"0:00-4:00":[0,0,0,0,0,0,0],"4:00-8:00":[0,0,0,0,0,0,0],"8:00-12:00":[0,0,0,0,0,0,0],"12:00-16:00":[0,0,0,0,0,0,0],"16:00-20:00":[0,0,0,0,0,0,0],"20:00-24:00":[0,0,0,0,0,0,0]};s.activeHours.forEach(((t,e)=>{t.hours.forEach((t=>{const s=this.mapHourToInterval(t.hour);s&&(a[s][e]+=this.roundToNearest(t.timeSpent,10))}))})),this.chartData=Object.entries(a).map((([t,e])=>({name:t,data:e})))}catch(e){console.error("Error fetching active hours data:",e)}else console.error("No authentication token found.")},roundToNearest(t,e=10){return Math.round(t/e)*e},mapHourToInterval(t){return t>=0&&t<4?"0:00-4:00":t>=4&&t<8?"4:00-8:00":t>=8&&t<12?"8:00-12:00":t>=12&&t<16?"12:00-16:00":t>=16&&t<20?"16:00-20:00":t>=20&&t<24?"20:00-24:00":null}},mounted(){this.fetchActiveHours()}};const De=(0,f.A)(Re,[["render",Se],["__scopeId","data-v-7515313f"]]);var xe=De;const Fe={class:"activity-engagement-container"};function _e(t,e,s,a,r,n){const i=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",Fe,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Activity Engagement",-1)),(0,o.bF)(i,{type:"pie",options:r.chartOptions,series:r.chartData,height:"350"},null,8,["options","series"])])}var Xe={name:"ActivityEngagement",components:{apexchart:P.A},data(){return{chartData:[0,0,0],totalActivities:0,chartOptions:{chart:{type:"pie"},labels:["Not Started","In Progress","Completed"],colors:["#C40D1E","#FF6C00","#49CB40"],legend:{position:"bottom"}}}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchTotalActivities(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/assessmentAttempts",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return void console.error("Error fetching total activities:",e.statusText);const s=await e.json();this.totalActivities=Object.keys(s.activitiesScored||{}).length,console.log("Total Activities:",this.totalActivities),this.fetchActivityEngagement()}catch(e){console.error("Error fetching total activities:",e)}else console.error("No authentication token found.")},async fetchActivityEngagement(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/activityEngagement",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)return void console.error("Error fetching activity engagement data:",e.statusText);const s=await e.json();if(console.log("API Response:",s),!s.verbsCount)return void console.error("Invalid data structure: verbsCount not found");let a=0,o=0,r=0;const n=s.verbsCount||{},i=Object.keys(n);console.log("Received Activities:",i),i.forEach((t=>{const e=n[t],s=e.initialized||0,i=e.completed||0;0===s?a++:s>0&&0===i?o++:s>0&&i>0&&r++})),a+=Math.max(0,this.totalActivities-i.length),console.log("Calculated Values:",{notStarted:a,inProgress:o,completed:r}),this.chartData=[a,o,r]}catch(e){console.error("Error fetching activity engagement data:",e)}else console.error("No authentication token found.")}},mounted(){this.fetchTotalActivities()}};const Ue=(0,f.A)(Xe,[["render",_e],["__scopeId","data-v-132261a3"]]);var Ie=Ue;const Pe={class:"activity-revisits-container"},Oe={class:"activity-revisits-content"},Ne={class:"activity-list"},je={class:"activity-info"},ze={class:"activity-count"};function Me(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Pe,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Activity Revisits",-1)),(0,o.Lk)("div",Oe,[(0,o.Lk)("ol",Ne,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.visibleData,((t,e)=>((0,o.uX)(),(0,o.CE)("li",{key:t.activityId,class:"activity-item"},[(0,o.Lk)("div",je,[(0,o.Lk)("span",null,(0,r.v_)(e+1)+". "+(0,r.v_)(t.course),1)]),(0,o.Lk)("div",ze,(0,r.v_)(t.count)+"x",1)])))),128))])]),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.toggleView&&i.toggleView(...t)),class:"view-more-button"},(0,r.v_)(n.showAll?"View Less":"View All"),1)])}var Ke={name:"ActivityRevisits",data(){return{activities:[],showAll:!1}},computed:{visibleData(){return this.showAll?this.activities:this.activities.slice(0,3)}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchActivityRevisits(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/activityRevists/learner",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`Failed to fetch data: ${e.status}`);const s=await e.json();console.log("Fetched Data:",s),this.activities=s.activitiesVisits.map((t=>({course:this.extractCourseName(t.activityId),count:t.visits,activityId:t.activityId})))}catch(e){console.error("Error fetching activity revisits:",e)}else console.error("No authentication token found.")},extractCourseName(t){return decodeURIComponent(t.split("/").pop().replace(/_/g," "))},toggleView(){this.showAll=!this.showAll}},mounted(){this.fetchActivityRevisits()}};const He=(0,f.A)(Ke,[["render",Me],["__scopeId","data-v-34c4e38a"]]);var Be=He;const We={class:"time-spent-container"},Je={class:"chart-wrapper"},$e={key:0,class:"time-spent-table"};function Ye(t,e,s,a,n,i){const c=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",We,[e[2]||(e[2]=(0,o.Lk)("h3",null,"Time Spent on Activities",-1)),e[3]||(e[3]=(0,o.Lk)("p",null,"in Minutes",-1)),(0,o.Lk)("div",Je,[(0,o.bF)(c,{type:"bar",options:i.chartOptions,series:i.chartData},null,8,["options","series"])]),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.toggleTable&&i.toggleTable(...t)),class:"view-more-button"},(0,r.v_)(n.showTable?"View Less":"View More"),1),n.showTable?((0,o.uX)(),(0,o.CE)("table",$e,[e[1]||(e[1]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Activity"),(0,o.Lk)("th",null,"Time Spent (minutes)")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.activities,(t=>((0,o.uX)(),(0,o.CE)("tr",{key:t.activityId},[(0,o.Lk)("td",null,(0,r.v_)(i.getActivityName(t.activityId)),1),(0,o.Lk)("td",null,(0,r.v_)(i.formatDuration(t.duration)),1)])))),128))])])):(0,o.Q3)("",!0)])}var Ve={name:"TimeSpent",components:{apexchart:P.A},provide(){return{activities:this.activities,totalTime:this.totalTime}},data(){return{showTable:!1,activities:[],totalTime:0}},computed:{chartData(){return[{name:"Time Spent",data:this.activities.map((t=>t.duration))}]},chartOptions(){return{chart:{type:"bar",height:"100%",width:"100%"},plotOptions:{bar:{horizontal:!1,columnWidth:"80%",endingShape:"rounded"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:this.activities.map((t=>this.getShortActivityName(t.activityId)))},yaxis:{title:{text:"Minutes"}},fill:{opacity:1},tooltip:{y:{formatter:t=>this.formatDuration(t)+" minutes"}},colors:["#4CAF50"]}}},methods:{toggleTable(){this.showTable=!this.showTable},getActivityName(t){return t.split("/").pop().replace(/_/g," ")},getShortActivityName(t){const e=this.getActivityName(t);return e.length>10?e.substring(0,10)+"...":e},formatDuration(t){return t%1===0?t.toFixed(0):t.toFixed(2)},async fetchData(){try{const t=document.cookie.match(/(^| )auth_token=([^;]+)/)?.[2];if(!t)return void console.error("Authentication token not found.");const e=await fetch("http://localhost:8000/timeSpentOnActivities/learner",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();this.activities=s.activities,this.totalTime=s.totalTime}catch(t){console.error("Error fetching data:",t)}}},mounted(){this.fetchData()}};const Ze=(0,f.A)(Ve,[["render",Ye],["__scopeId","data-v-054a3ff0"]]);var Qe=Ze;const Ge={class:"last-rating-container"},qe={key:0},ts={class:"stars"},es={class:"rating-content"},ss={key:1};function as(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Ge,[e[3]||(e[3]=(0,o.Lk)("h3",null,"Your Last Rating",-1)),n.lastRating?((0,o.uX)(),(0,o.CE)("div",qe,[(0,o.Lk)("div",ts,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.fullStars,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"star full"},"★")))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.emptyStars,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"star empty"},"☆")))),128))]),(0,o.Lk)("p",null,(0,r.v_)(n.lastRating.score)+" out of 5",1),(0,o.Lk)("div",es,[(0,o.Lk)("p",null,[e[0]||(e[0]=(0,o.Lk)("strong",null,"Activity:",-1)),(0,o.eW)(" "+(0,r.v_)(i.getActivityName(n.lastRating.activity)),1)]),(0,o.Lk)("p",null,[e[1]||(e[1]=(0,o.Lk)("strong",null,"Date:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatDate(n.lastRating.timestamp)),1)])])])):((0,o.uX)(),(0,o.CE)("div",ss,e[2]||(e[2]=[(0,o.Lk)("p",null,"No ratings available.",-1)])))])}var os={name:"LastRating",data(){return{lastRating:null}},computed:{fullStars(){return this.lastRating?Math.floor(this.lastRating.score):0},emptyStars(){return this.lastRating?5-Math.floor(this.lastRating.score):5}},methods:{getCookie(t){const e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return e?e[2]:null},async fetchLastRatings(){const t=this.getCookie("auth_token");if(t)try{const e=await fetch("http://localhost:8000/activityRatings/learner",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json(),a=s.lastRatings;let o=null;for(const t in a){const e=a[t];(!o||new Date(e.timestamp)>new Date(o.timestamp))&&(o={activity:t,score:e.score,timestamp:e.timestamp})}this.lastRating=o}catch(e){console.error("Error fetching last ratings:",e)}else console.error("No authentication token found.")},getActivityName(t){return t.split("/").pop().replace(/_/g," ")},formatDate(t){const e=new Date(t);return e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}},mounted(){this.fetchLastRatings()}};const rs=(0,f.A)(os,[["render",as],["__scopeId","data-v-165e9422"]]);var ns=rs,is={name:"EngagementView",components:{HeatmapChart:xe,ActivityEngagement:Ie,ActivityRevisits:Be,TimeSpent:Qe,LastRating:ns,DailyStreak:ut},data(){return{showHeader:!0}},methods:{navigateTo(t){this.$router.push(t)},handleTimeSpentClick(){console.log("Time Spent button clicked")}}};const cs=(0,f.A)(is,[["render",Ee],["__scopeId","data-v-01c776de"]]);var ls=cs;const us={class:"educator-container"},ds={class:"dashboard-header"},hs={class:"logo-greeting"},ms={class:"greeting"},ps={class:"dashboard"},vs={class:"grid-container"},gs={class:"grid-item pass-rates"},ks={class:"grid-item assessment-marks"},fs={class:"grid-item course-completion"},ys={class:"grid-item activity-revisits"},As={class:"grid-item educator-rating"};function bs(t,e,s,a,i,c){const l=(0,o.g2)("PassRatesChart"),u=(0,o.g2)("AssessmentMarks"),d=(0,o.g2)("CourseCompletion"),h=(0,o.g2)("ActivityRevisits"),m=(0,o.g2)("EducatorRating");return(0,o.uX)(),(0,o.CE)("div",us,[(0,o.Lk)("header",ds,[(0,o.Lk)("div",hs,[e[0]||(e[0]=(0,o.Lk)("div",{class:"logo"},[(0,o.Lk)("img",{src:n,alt:"LMS Logo"})],-1)),(0,o.Lk)("div",ms,[(0,o.Lk)("h1",null,"Welcome, "+(0,r.v_)(i.userName),1)])])]),(0,o.Lk)("div",ps,[(0,o.Lk)("div",vs,[(0,o.Lk)("div",gs,[(0,o.bF)(l)]),(0,o.Lk)("div",ks,[(0,o.bF)(u)]),(0,o.Lk)("div",fs,[(0,o.bF)(d,{courses:t.courseCompletionData},null,8,["courses"])]),(0,o.Lk)("div",ys,[(0,o.bF)(h)]),(0,o.Lk)("div",As,[(0,o.bF)(m)])])])])}const Cs={class:"assessment-marks-container"};function ws(t,e,s,a,r,n){const i=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",Cs,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Assessment Performance Overview",-1)),e[1]||(e[1]=(0,o.Lk)("p",null,"Student Pass Rate Distribution",-1)),(0,o.bF)(i,{type:"pie",options:r.chartOptions,series:r.chartSeries,height:"450"},null,8,["options","series"])])}var Ls={name:"PassRates",components:{apexchart:P.A},data(){return{chartSeries:[],chartOptions:{chart:{type:"pie"},labels:["Passed","Failed","Open"],colors:["#4caf50","#c40d1e","#ff9800"],dataLabels:{enabled:!0,formatter:t=>`${t}%`},tooltip:{y:{formatter:t=>`${t}%`}}}}},methods:{async fetchData(){try{const t=await fetch("http://localhost:8000/passRate/instructor"),e=await t.json();console.log("Pass Rate Data:",e);const s=e.userResults||{};let a=0,o=0,r=0;Object.values(s).forEach((t=>{a+=t.passed||0,o+=t.failed||0,r+=t.open||0}));const n=a+o+r;this.chartSeries=n>0?[Math.round(a/n*100),Math.round(o/n*100),Math.round(r/n*100)]:[0,0,0]}catch(t){console.error("Error fetching assessment data:",t)}}},mounted(){this.fetchData()}};const Es=(0,f.A)(Ls,[["render",ws],["__scopeId","data-v-867498fe"]]);var Ts=Es;const Ss={class:"assessment-marks-container"};function Rs(t,e,s,a,r,n){const i=(0,o.g2)("apexchart");return(0,o.uX)(),(0,o.CE)("div",Ss,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Assessment Performance Overview",-1)),e[1]||(e[1]=(0,o.Lk)("p",null,"Class Average Grades per Assessment",-1)),(0,o.bF)(i,{type:"bar",options:r.chartOptions,series:r.chartSeries,height:"450"},null,8,["options","series"])])}var Ds={name:"AssessmentMarks",components:{apexchart:P.A},data(){return{chartSeries:[],chartOptions:{chart:{type:"bar",zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"60%",endingShape:"rounded"}},dataLabels:{enabled:!0,style:{fontSize:"10px"},formatter:t=>`${t}%`,offsetY:-5},xaxis:{categories:[],labels:{style:{fontSize:"10px"},rotate:-45,trim:!1,maxHeight:120,wrap:!0}},yaxis:{min:0,max:100,labels:{formatter:t=>`${t}%`},title:{text:"Class Average (%)"}},colors:["#c40d1e"],tooltip:{y:{formatter:t=>`${t}%`}}}}},methods:{async fetchData(){try{const t=await fetch("http://localhost:8000/assessmentPerformance"),e=await t.json(),s=e.activitiesSummary;this.chartOptions={...this.chartOptions,xaxis:{categories:s.map((t=>t.activityId.split("/").pop().replace(/_/g," "))),labels:{style:{fontSize:"10px"},rotateAlways:!0,rotate:-45,trim:!1,maxHeight:120,wrap:!0}}},this.chartSeries=[{name:"Class Average",data:s.map((t=>Math.round(t.averageScore)))}]}catch(t){console.error("Error fetching assessment data:",t)}}},mounted(){this.fetchData()}};const xs=(0,f.A)(Ds,[["render",Rs],["__scopeId","data-v-3b5ec088"]]);var Fs=xs;const _s={class:"activity-revisits-container"},Xs={class:"activity-revisits-content"},Us={class:"activity-list"},Is={class:"activity-info"},Ps={class:"activity-subtitle"},Os={class:"activity-count"};function Ns(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",_s,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Activity Revisits",-1)),(0,o.Lk)("div",Xs,[(0,o.Lk)("ol",Us,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.visibleData,((t,e)=>((0,o.uX)(),(0,o.CE)("li",{key:t.course,class:"activity-item"},[(0,o.Lk)("div",Is,[(0,o.Lk)("span",null,(0,r.v_)(e+1)+". "+(0,r.v_)(t.course),1),(0,o.Lk)("div",Ps,(0,r.v_)(t.change),1)]),(0,o.Lk)("div",Os,(0,r.v_)(t.count)+"x",1)])))),128))])]),(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.toggleView&&i.toggleView(...t)),class:"view-more-button"},(0,r.v_)(n.showAll?"View Less":"View All"),1)])}var js={name:"ActivityRevisits",data(){return{activities:[],showAll:!1}},computed:{visibleData(){return this.showAll?this.activities:this.activities.slice(0,3)}},methods:{async fetchActivityRevisits(){try{const t=await fetch("http://localhost:8000/activityRevisits");if(!t.ok)throw new Error(`Failed to fetch data: ${t.status}`);const e=await t.json();console.log("Fetched Data:",e),this.activities=e.activitiesVisits.map((t=>({course:this.extractCourseName(t.activityId),count:t.visits,change:"+X in the last 30 days"})))}catch(t){console.error("Error fetching activity revisits:",t)}},extractCourseName(t){return decodeURIComponent(t.split("/").pop().replace(/_/g," "))},toggleView(){this.showAll=!this.showAll}},mounted(){this.fetchActivityRevisits()}};const zs=(0,f.A)(js,[["render",Ns],["__scopeId","data-v-39181cf0"]]);var Ms=zs;const Ks={class:"course-completion-container"},Hs={class:"course-list"},Bs=["onClick"],Ws={class:"progress-bar"},Js={class:"toggle-button"},$s={key:0,class:"subcourse-list"},Ys=["onClick"],Vs={class:"progress-bar"},Zs={class:"toggle-button"},Qs={key:0,class:"assessment-list"};function Gs(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",Ks,[e[1]||(e[1]=(0,o.Lk)("h3",null,"Course Completion",-1)),(0,o.Lk)("ul",Hs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.localCourses,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("div",{onClick:e=>i.toggleCourse(t.id),class:"course-header"},[(0,o.Lk)("span",null,(0,r.v_)(t.name),1),(0,o.Lk)("div",Ws,[(0,o.Lk)("div",{class:"progress",style:(0,r.Tr)({width:t.progress+"%"})},null,4)]),(0,o.Lk)("span",null,(0,r.v_)(i.formatPercentage(t.progress))+"%",1),(0,o.Lk)("span",null,(0,r.v_)(t.completedAssessments)+"/"+(0,r.v_)(t.totalAssessments),1),(0,o.Lk)("button",Js,(0,r.v_)(t.open?"▼":"▶"),1)],8,Bs),t.open?((0,o.uX)(),(0,o.CE)("ul",$s,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.subcourses,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.id},[(0,o.Lk)("div",{onClick:s=>i.toggleSubcourse(t.id,e.id),class:"subcourse-header"},[(0,o.Lk)("span",null,(0,r.v_)(e.name),1),(0,o.Lk)("div",Vs,[(0,o.Lk)("div",{class:"progress",style:(0,r.Tr)({width:e.progress+"%"})},null,4)]),(0,o.Lk)("span",null,(0,r.v_)(i.formatPercentage(e.progress))+"%",1),(0,o.Lk)("span",null,(0,r.v_)(e.completedAssessments)+"/"+(0,r.v_)(e.totalAssessments),1),(0,o.Lk)("button",Zs,(0,r.v_)(e.open?"▼":"▶"),1)],8,Ys),e.open?((0,o.uX)(),(0,o.CE)("ul",Qs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.assessments,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t.id},[(0,o.Lk)("span",null,(0,r.v_)(t.name),1),(0,o.Lk)("span",{class:(0,r.C4)({passed:"passed"===t.status,"not-passed":"not passed"===t.status})},(0,r.v_)(t.status),3)])))),128))])):(0,o.Q3)("",!0)])))),128))])):(0,o.Q3)("",!0),e[0]||(e[0]=(0,o.Lk)("hr",{class:"divider"},null,-1))])))),128))])])}var qs={name:"CourseCompletionChart",data(){return{localCourses:[],nameMapping:{}}},methods:{transformName(t){if(!t)return"";const e=t.split("/"),s=e[e.length-1];return s.replace(/_/g," ")},getNameForId(t){return this.nameMapping[t]||this.transformName(t)},formatPercentage(t){return t%1===0?t.toFixed(0):t.toFixed(1)},async fetchData(){try{const t=document.cookie.match(/(^| )auth_token=([^;]+)/),e=t?t[2]:null;if(!e)return void console.error("Authentication token not found.");const s=await fetch("http://localhost:8000/getNameForActivityId",{headers:{Authorization:`Bearer ${e}`}});if(!s.ok)throw new Error(`HTTP error from getNameForActivityId! Status: ${s.status}`);const a=await s.json();a&&a.objects&&Array.isArray(a.objects)&&a.objects.forEach((t=>{this.nameMapping[t.objectId]=t.objectName}));const o=await fetch("http://localhost:8000/parentsOfParents",{headers:{Authorization:`Bearer ${e}`}});if(!o.ok)throw new Error(`HTTP error from parentsOfParents! Status: ${o.status}`);const r=await o.json(),n=Object.values(r.parentOfParents),i=n.length?n[0]:"",c=this.getNameForId(i),l=await fetch("http://localhost:8000/assessmentPerformance/learner",{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw new Error(`HTTP error from assessmentPerformance! Status: ${l.status}`);const u=await l.json();if(!u||!u.subcourses)return void console.error("No subcourses found in fetched data",u);const d=u.subcourses.map(((t,e)=>({id:e,name:this.getNameForId(t.name),progress:t.progress,completedAssessments:t.completedAssessments,totalAssessments:t.totalAssessments,open:!1,assessments:t.assessments.map(((t,e)=>({id:e,name:this.getNameForId(t.activityId),status:t.status})))}))),h=d.reduce(((t,e)=>t+e.totalAssessments),0),m=d.reduce(((t,e)=>t+e.completedAssessments),0),p=h>0?m/h*100:0,v={id:"course1",name:c,progress:p,completedAssessments:m,totalAssessments:h,open:!1,subcourses:d};this.localCourses=[v]}catch(t){console.error("Error fetching courses:",t)}},toggleCourse(t){const e=this.localCourses.find((e=>e.id===t));e&&(e.open=!e.open)},toggleSubcourse(t,e){const s=this.localCourses.find((e=>e.id===t));if(s){const t=s.subcourses.find((t=>t.id===e));t&&(t.open=!t.open)}}},created(){this.fetchData()}};const ta=(0,f.A)(qs,[["render",Gs],["__scopeId","data-v-b8b797c8"]]);var ea=ta;const sa={class:"educator-rating-container"},aa={key:0},oa={class:"rating-list"},ra={class:"activity-info"},na={class:"stars"},ia={class:"rating-text"},ca={key:1};function la(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",sa,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Educator Rating Overview",-1)),e[1]||(e[1]=(0,o.Lk)("p",null,"Average Ratings per Activity",-1)),n.loaded?((0,o.uX)(),(0,o.CE)("div",aa,[(0,o.Lk)("div",oa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.ratings,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"rating-item"},[(0,o.Lk)("div",ra,[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,(0,r.v_)(t.name),1)])]),(0,o.Lk)("div",na,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.fullStars,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"star full"},"★")))),128)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.emptyStars,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"star empty"},"☆")))),128))]),(0,o.Lk)("p",ia,(0,r.v_)(t.rating.toFixed(1))+" / 5",1)])))),128))])])):((0,o.uX)(),(0,o.CE)("p",ca,"Loading..."))])}var ua={name:"EducatorRating",data(){return{ratings:[],loaded:!1}},methods:{async fetchEducatorRatings(){try{console.log("Fetching educator rating data...");const t=localStorage.getItem("token");if(!t)return void console.error("No authentication token found.");const e=await fetch("http://localhost:8000/activityRatings/instructor",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Failed to fetch data: ${e.status}`);const s=await e.json();console.log("Fetched educator rating data:",s);const a=s.activitiesRatings;this.ratings=a.map((t=>{const e=parseFloat(t.meanRating.toFixed(1));return{name:this.extractCourseName(t.activityId),rating:e,fullStars:Math.floor(e),emptyStars:5-Math.floor(e)}})),this.loaded=!0}catch(t){console.error("Error fetching educator rating data:",t)}},extractCourseName(t){return decodeURIComponent(t.split("/").pop().replace(/_/g," "))}},mounted(){this.fetchEducatorRatings()}};const da=(0,f.A)(ua,[["render",la],["__scopeId","data-v-64da6d2b"]]);var ha=da,ma={name:"EducatorDashboard",components:{PassRatesChart:Ts,AssessmentMarks:Fs,ActivityRevisits:Ms,CourseCompletion:ea,EducatorRating:ha},data(){return{userName:"Instructor",adminToken:localStorage.getItem("instructorToken")}}};const pa=(0,f.A)(ma,[["render",bs],["__scopeId","data-v-085cd7e0"]]);var va=pa;const ga={class:"admin-container"},ka={class:"dashboard"},fa={class:"grid-container"},ya={class:"grid-item users-time"},Aa={class:"grid-item popular-times"},ba={class:"stats-row"},Ca={class:"grid-item"},wa={class:"grid-item"},La={class:"grid-item"},Ea={class:"grid-item"},Ta={class:"grid-item keyword-list"};function Sa(t,e,s,a,r,n){const i=(0,o.g2)("ActiveUsersChart"),c=(0,o.g2)("PopularTimesChart"),l=(0,o.g2)("ActiveUsers_Admin"),u=(0,o.g2)("TotalUsers"),d=(0,o.g2)("TotalCourses"),h=(0,o.g2)("TotalActivities"),m=(0,o.g2)("KeywordsList");return(0,o.uX)(),(0,o.CE)("div",ga,[(0,o.Lk)("div",ka,[(0,o.Lk)("div",fa,[e[0]||(e[0]=(0,o.Lk)("p",{class:"subheader-1"},"Engagement",-1)),e[1]||(e[1]=(0,o.Lk)("p",{class:"subheader-2"},"Resource Availability & Content Popularity",-1)),(0,o.Lk)("div",ya,[(0,o.bF)(i)]),(0,o.Lk)("div",Aa,[(0,o.bF)(c)]),(0,o.Lk)("div",ba,[(0,o.Lk)("div",Ca,[(0,o.bF)(l)]),(0,o.Lk)("div",wa,[(0,o.bF)(u)]),(0,o.Lk)("div",La,[(0,o.bF)(d)]),(0,o.Lk)("div",Ea,[(0,o.bF)(h)])]),(0,o.Lk)("div",Ta,[(0,o.bF)(m)])])])])}const Ra={class:"chart-container"},Da={class:"chart-header"},xa=["value"];function Fa(t,e,s,n,i,c){const l=(0,o.g2)("Line");return(0,o.uX)(),(0,o.CE)("div",Ra,[(0,o.Lk)("div",Da,[(0,o.Lk)("h3",null,"Active Users (Last "+(0,r.v_)(i.selectedDays)+" Days)",1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.selectedDays=t),onChange:e[1]||(e[1]=(...t)=>c.fetchActiveUsersData&&c.fetchActiveUsersData(...t))},[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(50,(t=>(0,o.Lk)("option",{key:t,value:t},(0,r.v_)(t)+" Days",9,xa))),64))],544),[[a.u1,i.selectedDays]])]),(0,o.bF)(l,{data:c.chartData,options:c.chartOptions},null,8,["data","options"])])}gt.t1.register(gt.PP,gt.kc,gt.FN,gt.No,gt.hE,gt.m_,gt.s$);var _a={components:{Line:ie.N1},data(){return{adminToken:localStorage.getItem("adminToken"),activeUsersData:[],selectedDays:30}},computed:{averageUsers(){const t=this.activeUsersData.reduce(((t,e)=>t+e.users),0);return t/this.activeUsersData.length||0},chartData(){return{labels:this.activeUsersData.map((t=>t.date)),datasets:[{label:"Active Users",data:this.activeUsersData.map((t=>t.users)),fill:!0,backgroundColor:"rgba(200, 200, 200, 0.2)",borderColor:"rgb(150, 150, 150)",tension:.4},{label:"Average Users",data:Array(this.activeUsersData.length).fill(this.averageUsers),borderColor:"rgb(255, 99, 132)",borderWidth:2,borderDash:[10,5],pointRadius:0}]}},chartOptions(){return{responsive:!0,maintainAspectRatio:!1,layout:{padding:{bottom:20}},plugins:{legend:{display:!0}},scales:{x:{title:{display:!0,text:"Day"},ticks:{autoSkip:!1,maxRotation:45,minRotation:45,padding:10}},y:{title:{display:!0,text:"Number of active Users"},beginAtZero:!0}}}}},methods:{async fetchActiveUsersData(){const t=new Date;let e=[];for(let s=this.selectedDays-1;s>=0;s--){const a=new Date;a.setDate(t.getDate()-s);const o=a.toISOString().split("T")[0];e.push(fetch(`http://localhost:8000/activeUser/${s+1}`,{headers:{Authorization:`Bearer ${this.adminToken}`}}).then((t=>t.json())).then((t=>({date:o,users:t.activeUser||0}))).catch((t=>(console.error(`Error fetching active users for day ${s+1}:`,t),{date:o,users:0}))))}this.activeUsersData=await Promise.all(e)}},created(){this.fetchActiveUsersData()}};const Xa=(0,f.A)(_a,[["render",Fa],["__scopeId","data-v-924f8258"]]);var Ua=Xa;const Ia={class:"chart-container",style:{width:"100%",height:"400px"}};var Pa={__name:"PopularTimesChart",setup(t){gt.t1.register(gt.A6,gt.E8,gt.PP,gt.kc,gt.hE,gt.m_);const e=(0,vt.KR)(null),s=(0,vt.KR)(null),a=(0,vt.KR)({labels:[],datasets:[{label:"Active Users by Hour",data:[],backgroundColor:"rgba(96, 96, 96, 0.7)",borderWidth:1}]}),r=async()=>{try{const t=await fetch("http://localhost:8000/popularTimes"),e=await t.json(),s=e.activeUsersByHour;a.value.labels=Object.keys(s).map((t=>`${t}:00`)),a.value.datasets[0].data=Object.values(s),n()}catch(t){console.error("Error fetching data:",t)}},n=()=>{s.value&&s.value.destroy(),s.value=new gt.t1(e.value,{type:"bar",data:a.value,options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"Hour of the Day"}},y:{title:{display:!0,text:"Number of Active Users"},beginAtZero:!0,ticks:{precision:0}}}}})};return(0,o.sV)(r),(t,s)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[s[0]||(s[0]=(0,o.Lk)("h3",{class:"chart-header"},"Popular Times",-1)),(0,o.Lk)("div",Ia,[(0,o.Lk)("canvas",{ref_key:"chartRef",ref:e},null,512)])],64))}};const Oa=(0,f.A)(Pa,[["__scopeId","data-v-5d543c76"]]);var Na=Oa;const ja={class:"keywords-list"},za={class:"keyword-main"},Ma={class:"keyword-number"},Ka={class:"keyword-name"},Ha={class:"keyword-count"};function Ba(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div",ja,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Top 5 Keywords",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.keywords,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{class:"keyword-item",key:e},[(0,o.Lk)("div",za,[(0,o.Lk)("span",Ma,(0,r.v_)(e+1)+". ",1),(0,o.Lk)("span",Ka,(0,r.v_)(t.keyword),1),(0,o.Lk)("span",Ha,(0,r.v_)(t.count)+"x",1)])])))),128))])}var Wa={name:"KeywordsList",data(){return{keywords:[]}},methods:{async fetchKeywords(){try{const t=document.cookie.match(/(^| )auth_token=([^;]+)/)?.[2];if(!t)return void console.error("Authentication token not found.");const e=await fetch("http://localhost:8000/searchCount",{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);const s=await e.json();this.processKeywords(s.searchCount)}catch(t){console.error("Error fetching keywords:",t)}},processKeywords(t){const e=Object.entries(t).map((([t,e])=>({keyword:decodeURIComponent(t.split("/").pop().replace(/_/g," ")),count:e})));this.keywords=e.sort(((t,e)=>e.count-t.count)).slice(0,5)}},mounted(){this.fetchKeywords()}};const Ja=(0,f.A)(Wa,[["render",Ba],["__scopeId","data-v-3a01602f"]]);var $a=Ja;const Ya={class:"overview-box"};function Va(t,e,s,a,n,i){const c=(0,o.g2)("x");return(0,o.uX)(),(0,o.CE)("div",Ya,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Total Users",-1)),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(n.totalUsers),1)])),_:1})])}var Za={data(){return{totalUsers:0,adminToken:localStorage.getItem("adminToken")}},methods:{async fetchTotalUsers(){try{const t=await fetch("http://localhost:8000/totalUsers",{headers:{Authorization:`Bearer ${this.adminToken}`}});if(!t.ok)throw new Error("Failed to fetch totalUsers");const e=await t.json();void 0!==e.totalUsers&&(this.totalUsers=e.totalUsers)}catch(t){console.error("Error fetching totalUsers:",t)}}},created(){this.fetchTotalUsers()}};const Qa=(0,f.A)(Za,[["render",Va],["__scopeId","data-v-21707798"]]);var Ga=Qa;const qa={class:"overview-box"};function to(t,e,s,a,n,i){const c=(0,o.g2)("x");return(0,o.uX)(),(0,o.CE)("div",qa,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Total Activities",-1)),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(n.totalActivities),1)])),_:1})])}var eo={data(){return{totalActivities:0,adminToken:localStorage.getItem("adminToken")}},methods:{async fetchTotalActivities(){try{const t=await fetch("http://localhost:8000/totalActivities",{headers:{Authorization:`Bearer ${this.adminToken}`}});if(!t.ok)throw new Error("Failed to fetch totalActivities");const e=await t.json();e.activities&&Array.isArray(e.activities)&&(this.totalActivities=e.activities.length)}catch(t){console.error("Error fetching totalActivities:",t)}}},created(){this.fetchTotalActivities()}};const so=(0,f.A)(eo,[["render",to],["__scopeId","data-v-571dfe52"]]);var ao=so;const oo={class:"overview-box"};function ro(t,e,s,a,n,i){const c=(0,o.g2)("x");return(0,o.uX)(),(0,o.CE)("div",oo,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Total Courses",-1)),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(n.totalCourses),1)])),_:1})])}var no={data(){return{totalCourses:0,adminToken:localStorage.getItem("adminToken")}},methods:{async fetchTotalCourses(){try{const t=await fetch("http://localhost:8000/totalCourses",{headers:{Authorization:`Bearer ${this.adminToken}`}});if(!t.ok)throw new Error("Failed to fetch totalCourses");const e=await t.json();e.totalCourses&&Array.isArray(e.totalCourses)&&(this.totalCourses=e.totalCourses.length)}catch(t){console.error("Error fetching totalCourses:",t)}}},created(){this.fetchTotalCourses()}};const io=(0,f.A)(no,[["render",ro],["__scopeId","data-v-f410863e"]]);var co=io;const lo={class:"overview-box"};function uo(t,e,s,a,n,i){const c=(0,o.g2)("x");return(0,o.uX)(),(0,o.CE)("div",lo,[e[0]||(e[0]=(0,o.Lk)("h3",null,"Active Users in Course",-1)),(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,r.v_)(n.activeUsers),1)])),_:1}),(0,o.Lk)("p",{class:(0,r.C4)(i.userChangeClass)},(0,r.v_)(i.userChangeText),3)])}var ho={data(){return{activeUsers:0,previousActiveUsers:0,userChange:0,adminToken:localStorage.getItem("adminToken")}},computed:{userChangeText(){return`${this.userChange>=0?"+":""}${this.userChange} Users in the last 30 days`},userChangeClass(){return{"text-green":this.userChange>0,"text-red":this.userChange<0}}},methods:{async fetchActiveUsers(){try{const t=await fetch("http://localhost:8000/activeUser/1",{headers:{Authorization:`Bearer ${this.adminToken}`}});if(!t.ok)throw new Error("Failed to fetch activeUser (1 days)");const e=await t.json();void 0!==e.activeUser&&(this.activeUsers=e.activeUser);const s=await fetch("http://localhost:8000/activeUser/30",{headers:{Authorization:`Bearer ${this.adminToken}`}});if(!s.ok)throw new Error("Failed to fetch activeUser (30 day)");const a=await s.json();void 0!==a.activeUser&&(this.previousActiveUsers=a.activeUser),this.userChange=this.activeUsers-this.previousActiveUsers}catch(t){console.error("Error fetching activeUser data:",t)}}},created(){this.fetchActiveUsers()}};const mo=(0,f.A)(ho,[["render",uo],["__scopeId","data-v-6c812d61"]]);var po=mo,vo={name:"AdminDashboard",components:{ActiveUsersChart:Ua,PopularTimesChart:Na,KeywordsList:$a,ActiveUsers_Admin:po,TotalActivities:ao,TotalCourses:co,TotalUsers:Ga},data(){return{userName:"Administrator",adminToken:localStorage.getItem("adminToken")}}};const go=(0,f.A)(vo,[["render",Sa],["__scopeId","data-v-9c430b56"]]);var ko=go;const fo=[{path:"/",redirect:"/overall"},{path:"/overall",name:"Overall",component:St},{path:"/performance",name:"Performance",component:me},{path:"/engagement",name:"Engagement",component:ls},{path:"/educator-dashboard",name:"EducatorDashboard",component:va},{path:"/admin-dashboard",name:"AdminDashboard",component:ko}],yo=(0,b.aE)({history:(0,b.LA)(),routes:fo});var Ao=yo;const bo=(0,a.Ef)(A);bo.use(Ao),bo.mount("#app")}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,o,r){if(!a){var n=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],r=t[u][2];for(var i=!0,c=0;c<a.length;c++)(!1&r||n>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(i=!1,r<n&&(n=r));if(i){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[a,o,r]}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,r,n=a[0],i=a[1],c=a[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(c)var u=c(s)}for(e&&e(a);l<n.length;l++)r=n[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},a=self["webpackChunkvue_dashboard"]=self["webpackChunkvue_dashboard"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5270)}));a=s.O(a)})();
//# sourceMappingURL=app.e5dd08ee.js.map